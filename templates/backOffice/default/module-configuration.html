{extends file="admin-layout.tpl"}

{block name="after-bootstrap-css"}
    <style>
        .block {
            padding: 20px;
            border-bottom: 0.5px solid #00afd7;
        }

        .block h2 {
            color: #00afd7;
        }

        .block .block {
            border: 2px solid rgba(0, 211, 152, 0.61);
        }
    </style>
{/block}

{block name="no-return-functions"}
    {$admin_current_location = 'module'}
{/block}

{block name="page-title"}{intl l='BridgePayment module configuration' d='bridgepayment.bo.default'}{/block}

{block name="check-resource"}admin.module{/block}
{block name="check-access"}view{/block}
{block name="check-module"}BridgePayment{/block}

{block name="main-content"}
    {default_translation_domain domain="bridgepayment.bo.default"}
    <div class="col-md-12">
        <div class="panel panel-default">
            {form name="bridgepayment_form_bridge_payment_configuration"}
            <form action="{url path="/admin/module/BridgePayment/configure"}" method="POST">
                {form_hidden_fields form=$form}

                {if $form_error}
                    <div class="alert alert-danger">{$form_error_message}</div>
                {/if}

                {form_field form=$form field='error_url'}
                    <input type="hidden" name="{$name}" value="{url path={navigate to="current"}}"/>
                {/form_field}

                {form_field form=$form field='success_url'}
                    <input type="hidden" name="{$name}" value="{url path={navigate to="current"}}"/>
                {/form_field}

                <div class="panel-body">
                    <div class="row">
                        <div class="block col-md-12" style="background-color: #00afd7;">
                            <img style="height: 34px;" src="{image file='BridgePayment/assets/bridge-logo.png' source="BridgePayment"}" class="img-responsive"/>
                        </div>
                        {if $form_error}
                        <div class="row">
                            <div class="col-md-12">
                                <div class="alert alert-danger">{$form_error_message}</div>
                            </div>
                        </div>
                        {/if}
                        <div class="block col-md-12">
                            <div class="col-md-12">
                                <h2>{intl l="BridgePayment mode" d='bridgepayment.bo.default'}</h2>
                            </div>
                            <div class="col-md-12">
                                {form_field form=$form field="redirect_mode"}
                                    <div class="form-group {if $error}has-error{/if}">
                                        <label class="control-label" for="{$name}">
                                            <input type="checkbox" name="{$name}" id="{$name}" {if $data}checked{/if}/>
                                            {$label}
                                            {if $required}<span class="required">*</span>{/if}
                                        </label>

                                        {if ! empty($label_attr.help)}
                                            <span class="help-block">{$label_attr.help}</span>
                                        {/if}
                                    </div>
                                {/form_field}
                            </div>
                        </div>
                        <div class="block col-md-12">
                            <div class="col-md-12">
                                <h2>{intl l="API configuration" d='Bridgepayment.bo.default'}</h2>
                            </div>
                            <div class="col-md-6">
                                {render_form_field field="client_id"}
                            </div>
                            <div class="col-md-6">
                                {render_form_field field="client_secret"}
                            </div>
                        </div>
                        <div class="block col-md-12">
                            <div class="col-md-12">
                                <h2>{intl l="Webhook configuration." d='bridgepayment.bo.default'}</h2>
                            </div>
                            <div class="col-md-12">
                                {render_form_field field="hook_secret"}
                            </div>
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="control-label" for="url_callback">{intl l="URL de callback"}</label>
                                    <input id="url_callback" type="text" class="form-control" readonly value="{url path="/bridge/notification"}">
                                </div>
                            </div>
                        </div>
                        <div class="block col-md-12">
                            <div class="col-md-12">
                                <h2>{intl l="Mode" d='bridgepayment.bo.default'}</h2>
                            </div>
                            <div class="col-md-6">
                                {render_form_field field="run_mode"}
                            </div>
                            <div id="ip_list" class="col-md-6">
                                {render_form_field field="allowed_ip_list"}
                            </div>
                        </div>
                        <div class="block col-md-12">
                            <div class="col-md-12">
                                <h2>{intl l="Payment configurations." d='bridgepayment.bo.default'}</h2>
                            </div>
                            <div class="col-md-6">
                                {render_form_field field="minimum_amount"}
                            </div>
                            <div class="col-md-6">
                                {render_form_field field="maximum_amount"}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <input type="submit" class="btn btn-success form-control" value="{intl l="Save" d='bridgepayment.bo.default'}">
                            </div>
                        </div>
                    </div>
                </div>
                {/form}
            </form>
        </div>
    </div>
{/block}